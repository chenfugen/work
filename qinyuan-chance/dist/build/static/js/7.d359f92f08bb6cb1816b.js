webpackJsonp([7],{"/NBZ":function(t,e,a){(t.exports=a("UTlt")(!0)).push([t.i,"\n.actBox[data-v-e6431c16] {\n\tmargin-bottom: 20px;\n}\n","",{version:3,sources:["/Users/nelson/workspace/qinyuan-chance-farm-web/static-files/src/views/key/keyInput.vue"],names:[],mappings:";AACA;CACC,oBAAoB;CACpB",file:"keyInput.vue",sourcesContent:["\n.actBox[data-v-e6431c16] {\n\tmargin-bottom: 20px;\n}\n"],sourceRoot:""}])},"4/pM":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"keyList",data:function(){var t=this;return{id:"",inputMessage:"",pageNum:1,total:0,pageSize:1,tableLoading:!1,productInfo:{productType:"",productKey:"",productName:"",productSecret:""},productList:[],listData:[],columns:[{type:"selection",width:60,align:"center"},{title:"ProductKey",key:"productKey",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.productKey||null==e.row.productKey?"--":e.row.productKey)])}},{title:"ProductSecret",key:"productSecret",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.productSecret||null==e.row.productSecret?"--":e.row.productSecret)])}},{title:"DeviceName",key:"deviceName",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.deviceName||null==e.row.deviceName?"--":e.row.deviceName)])}},{title:"DeviceSecret",key:"deviceSecret",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.deviceSecret||null==e.row.deviceSecret?"--":e.row.deviceSecret)])}},{title:"状态",key:"status",align:"center",render:function(t,e){return t("div",[t("span",0==e.row.status?"不合格":"合格")])}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.handleDelete(a.row)}}},"删除")])}}]}},mounted:function(){this.id=this.$route.query.id,this.infoStatus=this.$route.query.status,this.$Message.success("预导入完成。"),this.getListData(),this.getInfoData()},methods:{getListData:function(){var t=this;this.tableLoading=!0;var e=this.$api.manage_triples_getTriplesPreList,a={pageNum:this.pageNum,pageSize:this.pageSize};this.$Ax.get(e,{params:a}).then(function(e){t.listData=e.data.data,t.inputMessage=e.data.message,t.total=e.data.total,t.tableLoading=!1}).catch(function(t){console.log(t)})},filp:function(t){this.pageNum=t,this.getListData()},goInfo:function(){this.$router.push({path:"/key/keyInfo",name:"keyInfo",query:{id:this.id,status:this.infoStatus,productKey:this.productInfo.productKey,productSecret:this.productInfo.productSecret}})},getInfoData:function(){var t=this,e=this.$api.manage_triplesConfig_getTriplesConfigInfo,a={id:this.id};this.$Ax.get(e,{params:a}).then(function(e){t.productInfo=e.data.data}).catch(function(t){console.log(t)})},handleChangePageSize:function(){},handleDelete:function(t){var e=this,a=this.$api.manage_triples_deleteFirmwareTriplesPre,n={id:t.id};this.$Modal.confirm({title:"警告",content:"<p>确认删除该密钥？</p>",onOk:function(){e.$Ax.post(a,n).then(function(t){t.data.success?(e.$Message.success("删除成功。"),e.getListData()):e.$Message.error(t.data.data)}).catch(function(t){console.log(t)})},onCancel:function(){e.$Message.success("已取消删除。")}})},handleBatchDelete:function(){var t=this,e=this.$refs.table.getSelection(),a=this.$api.manage_triples_deleteFirmwareTriplesPre,n="";for(var i in e)n=n+e[i].id+",";var s={id:n};this.$Modal.confirm({title:"警告",content:"<p>确认删除已选择的秘钥？</p>",onOk:function(){t.$Ax.post(a,s).then(function(e){e.data.success&&(t.$Message.success("删除成功。"),t.getListData())}).catch(function(t){console.log(t)})},onCancel:function(){t.$Message.success("已取消删除。")}})},submit:function(){var t=this,e=this.$api.manage_triples_addFirmwareTriplesBatch,a={productKey:this.productInfo.productKey,productSecret:this.productInfo.productSecret};this.$Modal.confirm({title:"提示",content:"<p>确认保存本次导入数据？</p>",onOk:function(){t.$Ax.post(e,a).then(function(e){e.data.success&&(t.$Message.success("保存成功。"),t.goInfo())}).catch(function(t){console.log(t)})},onCancel:function(){t.$Message.success("已取消保存。")}})}}},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfloat",attrs:{id:"keyList"}},[a("Button",{staticClass:"right marginBottom",attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),a("Button",{staticClass:"right marginBottom marginRight",on:{click:t.goInfo}},[t._v("取消")]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",attrs:{"label-width":120,inline:""}},[a("FormItem",{staticStyle:{width:"250px"},attrs:{label:"产品类型："}},[a("span",[t._v(t._s(t.productInfo.productType))])]),t._v(" "),a("FormItem",{staticStyle:{width:"250px"},attrs:{label:"产品名称："}},[a("span",[t._v(t._s(t.productInfo.productName))])]),t._v(" "),a("FormItem",{staticStyle:{width:"250px"},attrs:{label:"ProductKey："}},[a("span",[t._v(t._s(t.productInfo.productKey))])]),t._v(" "),a("FormItem",{attrs:{label:"ProductSecret："}},[a("span",[t._v(t._s(t.productInfo.productSecret))])])],1),t._v(" "),a("span",{staticClass:"left"},[t._v("秘钥列表")]),t._v(" "),a("span",{staticClass:"right",staticStyle:{color:"red"}},[t._v(t._s(t.inputMessage))]),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"table clearfloat marginTop"},[a("Table",{ref:"table",attrs:{loading:t.tableLoading,columns:t.columns,data:t.listData,border:""}}),t._v(" "),a("Button",{staticClass:"left marginTop",attrs:{type:"error"},on:{click:t.handleBatchDelete}},[t._v("批量删除")]),t._v(" "),a("Page",{staticClass:"right marginTop",attrs:{current:t.pageNum,total:t.total,"page-size":t.pageSize,size:"small","page-size-opts":[10,20,30,40],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.filp,"on-page-size-change":t.handleChangePageSize}})],1)],1)};i._withStripped=!0;var s={render:i,staticRenderFns:[]},o=s;var r=!1;var c=a("C7Lr")(n,o,!1,function(t){r||a("FDqV")},"data-v-e6431c16",null);c.options.__file="src/views/key/keyInput.vue";e.default=c.exports},FDqV:function(t,e,a){var n=a("/NBZ");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("FIqI")("83123034",n,!1,{})}});