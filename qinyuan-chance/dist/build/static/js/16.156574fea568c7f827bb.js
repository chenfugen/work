webpackJsonp([16],{EllN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"keyList",data:function(){var t=this;return{permission:{upload:!1,download:!1},pageNum:1,total:0,pageSize:1,id:"",infoStatus:"",productKey:"",upLoadURL:"",upLoadHeader:{},upLoadData:{productKey:"",productSecret:""},tableLoading:!1,infoData:{productName:"",productKey:"",productType:""},listData:[],columns:[{title:"DeviceName",key:"deviceName",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.deviceName))])}},{title:"DeviceSecret",key:"deviceSecret",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.deviceSecret))])}},{title:"导入时间",key:"createTime",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.createTime))])}},{title:"状态",key:"status",align:"center",render:function(t,e){return t("div",[t("span",1==e.row.status?"已使用":0==e.row.status?"未使用":"--")])}},{title:"绑定MAC",key:"mac",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.mac))])}},{title:"绑定SN",key:"snCode",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.snCode))])}},{title:"绑定时间",key:"date",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.date))])}},{title:"检测状态",key:"date",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.date))])}},{title:"检测人员",key:"date",align:"center",render:function(e,a){return e("div",[e("span",t.dealNull(a.row.date))])}}]}},mounted:function(){this.$route.query.id?(this.id=this.$route.query.id,this.infoStatus=this.$route.query.status,this.productKey=this.$route.query.productKey,this.productSecret=this.$route.query.productSecret,this.getPermissionList(),this.getInfoData(),this.getListData()):this.$router.push({path:"/key/keyList",name:"keyList"}),this.upLoadURL=this.$AxConfig.baseURL+this.$api.manage_triples_import,this.pageNum=1,this.pageSize=10,this.upLoadData={productKey:this.productKey,productSecret:this.productSecret},this.upLoadHeader={token:sessionStorage.getItem("token")}},methods:{getListData:function(){var t=this;this.tableLoading=!0;var e=this.$api.manage_triples_getTriplesList,a={pageNum:this.pageNum,pageSize:this.pageSize,status:this.infoStatus,productKey:this.productKey};this.$Ax.get(e,{params:a}).then(function(e){t.listData=e.data.data,t.total=e.data.total,t.tableLoading=!1}).catch(function(t){console.log(t)})},getInfoData:function(){var t=this,e=this.$api.manage_triplesConfig_getTriplesConfigInfo,a={id:this.id};this.$Ax.get(e,{params:a}).then(function(e){t.infoData=e.data.data}).catch(function(t){console.log(t)})},handleFlip:function(t){this.pageNum=t,this.getListData()},handleCheckTab:function(t){this.pageNum=1,this.infoStatus=t,this.getListData()},handleChangePageSize:function(){},handleDownload:function(){window.open(this.$AxConfig.baseURL+this.$api.manage_triples_downloadModel)},beforeUpload:function(t){t.name.substring(t.name.lastIndexOf("."),t.name.length);return!0},uploadSuccess:function(t,e,a){t.success?this.$router.push({path:"/key/keyInput",name:"keyInput",query:{id:this.id,status:this.infoStatus}}):this.$Message.error(t.message)},uploadError:function(t,e,a){this.$Message.error("上传文件失败")},dealNull:function(t){return""===t||null===t?"--":t},getPermissionList:function(){var t=JSON.parse(sessionStorage.getItem("menu"));for(var e in t)if("秘钥管理"==t[e].name){var a=t[e].children[0].children;for(var i in a)"上传文件"==a[i].name&&(this.permission.upload=a[i].checked),"下载模板"==a[i].name&&(this.permission.download=a[i].checked)}}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfloat",attrs:{id:"keyList"}},[a("span",[t._v("基本信息")]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",attrs:{model:t.infoData,"label-width":120,inline:""}},[a("FormItem",{staticStyle:{"margin-right":"50px"},attrs:{label:"产品名称:"}},[a("span",[t._v(t._s(t.dealNull(t.infoData.productName)))])]),t._v(" "),a("FormItem",{staticStyle:{"margin-right":"50px"},attrs:{label:"ProductKey:"}},[a("span",[t._v(t._s(t.dealNull(t.infoData.productKey)))])]),t._v(" "),a("FormItem",{staticStyle:{"margin-right":"50px"},attrs:{label:"ProductSecret:"}},[a("span",[t._v(t._s(t.dealNull(t.infoData.productSecret)))])]),t._v(" "),a("FormItem",{staticStyle:{"margin-right":"50px"},attrs:{label:"秘钥总量:"}},[a("span",[t._v(t._s(t.dealNull(t.infoData.totalCount)))])])],1),t._v(" "),a("span",{staticClass:"left"},[t._v("秘钥详情")]),t._v(" "),a("Upload",{staticClass:"right marginBottom",attrs:{headers:t.upLoadHeader,action:t.upLoadURL,"before-upload":t.beforeUpload,data:t.upLoadData,accept:"xls","on-success":t.uploadSuccess,"on-error":t.uploadError}},[t.permission.upload?a("Button",{attrs:{icon:"ios-cloud-upload-outline",type:"primary"}},[t._v("上传文件")]):t._e()],1),t._v(" "),t.permission.download?a("Button",{staticClass:"right marginBottom marginRight",attrs:{icon:"ios-download-outline"},on:{click:t.handleDownload}},[t._v("下载模板")]):t._e(),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"table clearfloat marginTop"},[a("Tabs",{attrs:{animated:!1,value:t.infoStatus},on:{"on-click":t.handleCheckTab}},[a("TabPane",{attrs:{label:"剩余",name:"0"}},[a("Table",{attrs:{loading:t.tableLoading,columns:t.columns,data:t.listData,border:""}}),t._v(" "),a("Page",{staticClass:"right marginTop",attrs:{current:t.pageNum,total:t.total,"page-size":t.pageSize,size:"small","page-size-opts":[10,20,30,40],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.handleFlip,"on-page-size-change":t.handleChangePageSize}})],1),t._v(" "),a("TabPane",{attrs:{label:"已使用",name:"1"}},[a("Table",{attrs:{loading:t.tableLoading,columns:t.columns,data:t.listData,border:""}}),t._v(" "),a("Page",{staticClass:"right marginTop",attrs:{current:t.pageNum,total:t.total,"page-size":t.pageSize,size:"small","page-size-opts":[10,20,30,40],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.handleFlip,"on-page-size-change":t.handleChangePageSize}})],1)],1)],1)],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]},o=s;var r=!1;var l=a("C7Lr")(i,o,!1,function(t){r||a("bY4h")},"data-v-4b7d555a",null);l.options.__file="src/views/key/keyInfo.vue";e.default=l.exports},bY4h:function(t,e,a){var i=a("v5RV");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("49e416d4",i,!1,{})},v5RV:function(t,e,a){(t.exports=a("UTlt")(!0)).push([t.i,"\n.actBox[data-v-4b7d555a] {\n\tmargin-bottom: 20px;\n}\n","",{version:3,sources:["/Users/nelson/workspace/qinyuan-chance-farm-web/static-files/src/views/key/keyInfo.vue"],names:[],mappings:";AACA;CACC,oBAAoB;CACpB",file:"keyInfo.vue",sourcesContent:["\n.actBox[data-v-4b7d555a] {\n\tmargin-bottom: 20px;\n}\n"],sourceRoot:""}])}});