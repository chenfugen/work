webpackJsonp([17],{"+9rc":function(t,e,a){var s=a("0DxX");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("FIqI")("4f219c83",s,!1,{})},"0DxX":function(t,e,a){(t.exports=a("UTlt")(!0)).push([t.i,"\n.textBlue[data-v-33d3554d] {\n\tfont-size: 50px;\n\tcolor: blue;\n}\n.textRed[data-v-33d3554d] {\n\tfont-size: 50px;\n\tcolor: red;\n}\n.infoBox[data-v-33d3554d] {\n\theight: 70px;\n}\n.title[data-v-33d3554d] {\n\tfont-weight: 800;\n}\n.info-line[data-v-33d3554d] {\n\twidth: 96%;\n\tdisplay: inline-block;\n\tline-height: 18px;\n}\n.redTitle[data-v-33d3554d] {\n\tposition: relative;\n\ttop: 5px;\n\tfont-size: 28px;\n\tcolor: red;\n\tfont-weight: 700;\n}\n.blueTitle[data-v-33d3554d] {\n\tposition: relative;\n\ttop: 5px;\n\tfont-size: 28px;\n\tcolor: blue;\n\tfont-weight: 700;\n}\n.collapse[data-v-33d3554d] {\n\tmargin-Bottom: 40px;\n\tmin-width: 940px;\n}\n","",{version:3,sources:["/Users/nelson/workspace/qinyuan-chance-farm-web/static-files/src/views/chance/chanceStart.vue"],names:[],mappings:";AACA;CACC,gBAAgB;CAChB,YAAY;CACZ;AACD;CACC,gBAAgB;CAChB,WAAW;CACX;AACD;CACC,aAAa;CACb;AACD;CACC,iBAAiB;CACjB;AACD;CACC,WAAW;CACX,sBAAsB;CACtB,kBAAkB;CAClB;AACD;CACC,mBAAmB;CACnB,SAAS;CACT,gBAAgB;CAChB,WAAW;CACX,iBAAiB;CACjB;AACD;CACC,mBAAmB;CACnB,SAAS;CACT,gBAAgB;CAChB,YAAY;CACZ,iBAAiB;CACjB;AACD;CACC,oBAAoB;CACpB,iBAAiB;CACjB",file:"chanceStart.vue",sourcesContent:["\n.textBlue[data-v-33d3554d] {\n\tfont-size: 50px;\n\tcolor: blue;\n}\n.textRed[data-v-33d3554d] {\n\tfont-size: 50px;\n\tcolor: red;\n}\n.infoBox[data-v-33d3554d] {\n\theight: 70px;\n}\n.title[data-v-33d3554d] {\n\tfont-weight: 800;\n}\n.info-line[data-v-33d3554d] {\n\twidth: 96%;\n\tdisplay: inline-block;\n\tline-height: 18px;\n}\n.redTitle[data-v-33d3554d] {\n\tposition: relative;\n\ttop: 5px;\n\tfont-size: 28px;\n\tcolor: red;\n\tfont-weight: 700;\n}\n.blueTitle[data-v-33d3554d] {\n\tposition: relative;\n\ttop: 5px;\n\tfont-size: 28px;\n\tcolor: blue;\n\tfont-weight: 700;\n}\n.collapse[data-v-33d3554d] {\n\tmargin-Bottom: 40px;\n\tmin-width: 940px;\n}\n"],sourceRoot:""}])},jNQm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),o={name:"chanceStart",data:function(){var t=this;return{isCount:!1,checkStatus:"0",errorMSG:"",ws:null,timer:null,hbTimer:null,snDisable:!0,macDisable:!1,checkStart:!1,panelLoading:!1,checkTableLoading:!1,checkkeyLoading:!1,checkHardLoading:!1,tableLoading:!1,missionId:"",taskProductKey:"",todayTotal:"",checkNowData:{data:[],profile:{},quad:{}},activeCollapse:[],firmCheckTxt:"",firmCheckStatus:!0,keyCheckTxt:"",keyCheckStatus:!0,attCheckTxt:"",attCheckStatus:!0,rule:{},inputBG:{marginBottom:"40px",minWidth:"940px",border:""},missionInfo:{name:"吉祥三宝厨下机",readyCount:0,totalCount:0},form:{mac:"",snCode:""},lastCheckForm:{mac:"",snCode:""},historyInfoData:{checkStatus:"",checkTime:"",checkUserId:"",checkUserName:"",createTime:"",deviceId:"",deviceName:"",firmwareVersionDetail:{},id:"",mac:"",propertiesDetail:{},secretCheckDetail:{},snCode:"",updateTime:"",result:{}},listData:[],listAtt:[],columns:[{title:"属性名称",key:"propertiesKey",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.propertiesKey||null==e.row.propertiesKey?"--":e.row.propertiesKey)])}},{title:"实际上报值",key:"reportValue",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.reportValue||null==e.row.reportValue?"--":e.row.reportValue)])}},{title:"合格值",key:"standardValue",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.standardValue||null==e.row.standardValue?"--":e.row.standardValue)])}},{title:"备注",key:"mark",align:"center",render:function(t,e){return t("div",[t("span",""==e.row.mark||null==e.row.mark?"--":e.row.mark)])}},{title:"状态",key:"status",align:"center",render:function(t,e){return t("div",[t("span",{style:{color:"1"==e.row.status?"blue":"red"}},"1"==e.row.status?"通过":"未通过")])}}],historyTableLoading:!1,pageNum:1,pageSize:10,total:0,showMore:!1,dialog:!1,dialogLoading:!1,listHistory:[],columnsHistory:[{title:"MAC",key:"mac",align:"center",render:function(t,e){return t("div",[t("span",dealData(e.row.mac))])}},{title:"SN",key:"snCode",align:"center",render:function(t,e){return t("div",[t("span",dealData(e.row.snCode))])}},{title:"检测时间",key:"checkTime",align:"center",render:function(t,e){return t("div",[t("span",dealData(e.row.checkTime))])}},{title:"检测结果",key:"checkStatus",align:"center",render:function(t,e){return t("div",[t("span",{style:{color:"1"==e.row.checkStatus?"blue":"red"}},"1"==e.row.checkStatus?"通过":"未通过")])}},{title:"操作",key:"checkStatus",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary"},on:{click:function(){t.getInfo(a.row)}}},"详细")])}}]}},mounted:function(){this.changeInputStyle(),this.$route.query.id?(this.missionId=this.$route.query.id,this.taskProductKey=this.$route.query.taskProductKey,this.refreshProductList(),this.startChance()):this.$router.push({push:"/",name:"chance"})},beforeDestroy:function(){null!=this.ws&&(this.ws.close(),window.clearTimeout(this.timer),window.clearInterval(this.hbTimer))},methods:{changeInputStyle:function(){document.getElementsByClassName("collapse")[0].children[0].children[0].style.height="70px";var t=document.getElementById("macInput").children[2];t.style.height="60px",t.style.width="300px",t.style.fontSize="33px";var e=document.getElementById("snInput").children[2];e.style.height="60px",e.style.width="400px",e.style.fontSize="33px"},refreshProductList:function(){var t=this.$api.manage_product_refreshProduct;this.$Ax.get(t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},startChance:function(){this.getMissionInfo(),this.getHistoryListHome();var t=document.getElementById("macInput");this.timer=setTimeout(function(){t.children[1].focus(),t.children[1].select()},100)},getMissionInfo:function(){var t=this,e=this.$api.manage_productionTask_getProductionTaskInfo,a={id:this.missionId};this.$Ax.get(e,{params:a}).then(function(e){t.missionInfo=e.data.data,t.getTodayCount()}).catch(function(t){console.log(t)})},getTodayCount:function(){var t=this,e={productKey:this.missionInfo.productKey,taskId:this.missionId},a=this.$api.manage_device_countTodayFinishDevice;this.$Ax.get(a,{params:e}).then(function(e){t.todayTotal=e.data.data.todayTotal}).catch(function(t){console.log(t)})},getHistoryListHome:function(){var t=this,e=this.$api.manage_deviceCheckRecord_getDeviceCheckRecordList,a={pageNum:1,pageSize:5,taskId:this.missionId};this.$Ax.get(e,{params:a}).then(function(e){t.listHistory=e.data.data,t.listHistory.shift()})},getHistoryListTable:function(){var t=this;this.showMore=!0,this.historyTableLoading=!0;var e=this.$api.manage_deviceCheckRecord_getDeviceCheckRecordList,a={pageNum:this.pageNum,pageSize:this.pageSize,taskId:this.missionId};this.$Ax.get(e,{params:a}).then(function(e){t.listHistory=e.data.data,t.total=e.data.total,t.historyTableLoading=!1})},handleCheckMAC:function(){this.form.mac=this.form.mac.toUpperCase(),this.activeCollapse=[],this.macDisable=!0;if(null==this.form.mac.match(/(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9]{8,12}/)){this.$Message.error("MAC地址格式错误！"),this.macDisable=!1;var t=document.getElementById("macInput");this.timer=setTimeout(function(){t.children[1].focus(),t.children[1].select()},100)}else{this.inputBG={marginBottom:"40px",minWidth:"940px",background:"yellow"},this.snDisable=!1;var e=document.getElementById("snInput");this.timer=setTimeout(function(){e.children[1].focus(),e.children[1].select()},100)}},handleCheckSn:function(){var t=this;this.inputBG={marginBottom:"40px",minWidth:"940px",background:"blue"},this.snDisable=!0,this.$Message.info("正在检测SN码");var e=this.$api.manage_deviceCheck_checksnCode;if(this.form.snCode.length>20){var a=this.form.snCode.split("barcode=")[1];this.form.snCode=a}var s={snCode:this.form.snCode,mac:this.form.mac};this.$Ax.post(e,s).then(function(e){t.$Message.info(e.data.message),e.data.success?(t.snDisable=!0,t.checkStart=!0,t.firmCheckTxt="正在检测...",t.keyCheckTxt="正在检测...",t.attCheckTxt="正在检测...",null==t.ws||3==t.ws.readyState?t.handleConnectWS():t.handleConnectDevice()):t.handleRestart()}).catch(function(t){console.log(t)})},handleConnectWS:function(){var t="";if("WebSocket"in window){this.ws=new WebSocket(this.$api.webSorket);var e=this;this.ws.onopen=function(){e.handleConnectService()},this.ws.onmessage=function(a){"connect"==(t=JSON.parse(a.data)).cmd&&"20000"==t.returnCode&&(e.handleKeepHeart(),e.$Message.success("WebSocket服务连接成功！")),"disconnect"==t.cmd&&t.moduleId==e.form.mac&&this.$Message.info("当前设备未连接WS服务器，正在等待设备连接..."),"connect"==t.cmd&&t.moduleId==e.form.mac&&(window.clearTimeout(e.timer),e.handleCheckDevice("all")),"subscribe"==t.cmd&&"20000"==t.returnCode&&e.isCount&&(e.$Message.success("设备订阅成功！"),window.clearTimeout(e.timer),e.handleCheckDevice("all")),"report"==t.cmd&&"1"==e.checkStatus&&(window.clearTimeout(e.timer),e.$Message.success("获取设备上报信息成功！"),e.handleDisConnectDevice(),e.handleDealData(t))},this.ws.onclose=function(){window.clearTimeout(e.timer),window.clearInterval(e.hbTimer),e.$Message.success("WebSocket连接关闭"),e.handleRestart()},this.ws.onerror=function(t){e.$Message.error("WebSocket连接发生错误")}}else this.$Message.error("您的浏览器不支持websorket，请更换浏览器。")},handleConnectService:function(){var t={version:1,cmd:"connect",token:sessionStorage.getItem("token")};this.ws.send(i()(t)),this.handleConnectDevice()},handleConnectDevice:function(){this.isCount=!0;var t={version:1,cmd:"subscribe",flag:"on",moduleId:this.form.mac};this.lastCheckForm={mac:this.form.mac,snCode:this.form.snCode},this.ws.send(i()(t));var e=this;this.timer=setTimeout(function(){e.$Message.error("未检测到设备，请检测设备连接"),e.handleRestart()},15e3)},handleDisConnectDevice:function(){this.isCount=!1;var t={version:1,cmd:"subscribe",flag:"off",moduleId:this.form.mac};this.ws.send(i()(t))},handleCheckDevice:function(t){this.checkTableLoading=!0,this.checkkeyLoading=!0,this.checkHardLoading=!0;var e={version:"1",cmd:"query",info:t,moduleId:this.form.mac};this.ws.send(i()(e)+"\r\n"),this.checkStatus="1";var a=this;this.timer=setTimeout(function(){a.handleDisConnectDevice(),a.checkStatus="2",a.inputBG={marginBottom:"40px",minWidth:"940px",background:"red"},a.$Message.error("设备未响应，请检测设备连接"),this.firmCheckTxt="",this.keyCheckTxt="",this.attCheckTxt="",a.checkHardLoading=!1,a.checkkeyLoading=!1,a.checkTableLoading=!1,a.handleRestart()},15e3)},handleKeepHeart:function(){var t=this;this.hbTimer=setInterval(function(){t.ws.send(i()({v:1,cmd:"hb"}))},3e4)},handleDealData:function(t){this.checkNowData=t;var e={taskProductKey:this.taskProductKey,productKey:t.quad.productKey,moduleType:t.profile.moduleType,softVersion:t.profile.softVersion},a={taskProductKey:this.taskProductKey,mac:this.form.mac,snCode:this.form.snCode,productKey:t.quad.productKey,productSecret:t.quad.productSecret,deviceName:t.quad.deviceName,deviceSecret:t.quad.deviceSecret},s=[];for(var o in this.checkNowData.data)s.push({propertiesKey:o,propertiesValue:this.checkNowData.data[o]});var n={taskProductKey:this.taskProductKey,productKey:this.missionInfo.productKey,deviceProperties:i()(s)};this.handleCheckHard(e,a,n)},handleCheckHard:function(t,e,a){var s=this,i=this.$api.manage_deviceCheck_checkFirmwareVersion;this.$Ax.post(i,t).then(function(i){i.data.success?s.firmCheckStatus=!0:(s.firmCheckStatus=!1,"3"!=s.checkStatus&&(s.errorMSG=i.data.message),s.checkStatus="3"),s.firmCheckTxt=i.data.message,s.checkHardLoading=!1,s.handleCheckKey(t,e,a)}).catch(function(t){console.log(t)})},handleCheckKey:function(t,e,a){var s=this,i=this.$api.manage_deviceCheck_checkTriples;this.$Ax.post(i,e).then(function(i){i.data.success?s.keyCheckStatus=!0:(s.keyCheckStatus=!1,"3"!=s.checkStatus&&(s.errorMSG=i.data.message),s.checkStatus="3"),s.keyCheckTxt=i.data.message,s.handleCheckProperties(t,e,a),s.checkkeyLoading=!1}).catch(function(t){console.log(t)})},handleCheckProperties:function(t,e,a){var s=this,i=this.$api.manage_deviceCheck_checkDeviceProperties;this.$Ax.post(i,a).then(function(i){i.data.success?s.attCheckStatus=!0:(s.attCheckStatus=!1,"3"!=s.checkStatus&&(s.errorMSG=i.data.message),s.checkStatus="3"),s.attCheckTxt=i.data.message,s.listData=i.data.data,s.handleSaveCheck(t,e,a),s.checkTableLoading=!1}).catch(function(t){console.log(t)})},handleSaveCheck:function(t,e,a){var s=this;1==this.firmCheckStatus&&1==this.keyCheckStatus&&1==this.attCheckStatus?(this.inputBG={marginBottom:"40px",minWidth:"940px",background:"#10a54a"},this.checkStatus="4"):this.inputBG={marginBottom:"40px",minWidth:"940px",background:"red"};var o=this.$api.manage_deviceCheck_checkDeviceFinished,n={firmCheckTxt:this.firmCheckTxt,firmCheckStatus:this.firmCheckStatus,keyCheckTxt:this.keyCheckTxt,keyCheckStatus:this.keyCheckStatus,attCheckTxt:this.attCheckTxt,attCheckStatus:this.attCheckStatus},r={netType:this.missionInfo.netType,snCode:this.form.snCode,mac:this.form.mac,taskId:this.missionId,checkStatus:"4"==this.checkStatus?"1":"0",firmwareVersionDetail:i()(t),secretCheckDetail:i()({paraKey:i()(e),result:i()(n)}),propertiesDetail:i()(this.listData)};this.$Ax.post(o,r).then(function(t){t.data.success?s.$Message.success("检测完成！"):s.$Message.error(t.data.data),s.handleRestart()}).catch(function(t){console.log(t)})},handleChangePanel:function(t){var e=this;if(2==t.length){var a=t[1];this.activeCollapse=[a]}if(0!=t.length){this.panelLoading=!0;var s=this.$api.manage_deviceCheckRecord_getDeviceCheckRecordInfo,i={id:t[0]};this.$Ax.get(s,{params:i}).then(function(t){e.historyInfoData=t.data.data,e.historyInfoData.firmwareVersionDetail=JSON.parse(e.historyInfoData.firmwareVersionDetail),e.historyInfoData.propertiesDetail=JSON.parse(e.historyInfoData.propertiesDetail),e.historyInfoData.result=JSON.parse(JSON.parse(e.historyInfoData.secretCheckDetail).result),e.historyInfoData.secretCheckDetail=JSON.parse(JSON.parse(e.historyInfoData.secretCheckDetail).paraKey),e.listAtt=e.historyInfoData.propertiesDetail,e.panelLoading=!1}).catch(function(t){console.log(t)})}},hanldeBack:function(){this.showMore=!1,this.getHistoryListHome()},handleRestart:function(){this.macDisable=!1,this.snDisable=!0,this.checkStart=!1,this.startChance()},handleChangePageSize:function(t){this.pageSize=t,this.getHistoryListTable()},flip:function(t){this.pageNum=t,this.getHistoryListTable()},getInfo:function(t){var e=this;this.dialogLoading=!0,this.dialog=!0;var a=this.$api.manage_deviceCheckRecord_getDeviceCheckRecordInfo,s={id:t.id};this.$Ax.get(a,{params:s}).then(function(t){e.historyInfoData=t.data.data,e.historyInfoData.firmwareVersionDetail=JSON.parse(e.historyInfoData.firmwareVersionDetail),e.historyInfoData.propertiesDetail=JSON.parse(e.historyInfoData.propertiesDetail),e.historyInfoData.result=JSON.parse(JSON.parse(e.historyInfoData.secretCheckDetail).result),e.historyInfoData.secretCheckDetail=JSON.parse(JSON.parse(e.historyInfoData.secretCheckDetail).paraKey),e.listAtt=e.historyInfoData.propertiesDetail,e.dialogLoading=!1}).catch(function(t){console.log(t)})},dealData:function(t){return""===t||null===t?"--":t}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"chanceStart"}},[a("Collapse",{staticStyle:{"margin-bottom":"30px"}},[a("Panel",{attrs:{name:"baseInfo"}},[a("div",{staticClass:"info-line"},[a("span",[t._v("基本信息")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("产品名称:"),a("span",{staticClass:"blueTitle"},[t._v(" "+t._s(t.dealData(t.missionInfo.productName)))])]),t._v(" "),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("生产进度:")]),t._v(" "),a("span",{staticClass:"blueTitle"},[t._v(" "+t._s(t.dealData(t.missionInfo.finishedTotal))+"/"+t._s(t.dealData(t.missionInfo.planTotal)))])]),t._v(" "),a("div",{staticClass:"clearfloat",attrs:{slot:"content"},slot:"content"},[a("Form",{staticClass:"clearfloat",attrs:{model:t.form,"label-position":"right","label-width":120,inline:""}},[a("div",{staticClass:"left",staticStyle:{width:"33%"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"工单号:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.workOrderCode)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"产品名称:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.productName)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"ERP编码:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.erpCode)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"计划生产数量:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.planTotal)))])])],1),t._v(" "),a("div",{staticClass:"left",staticStyle:{width:"33%"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"已生产数量:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.finishedTotal)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"创建时间:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.createTime)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"创建人:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.userName)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"最后生产时间:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.updateTime)))])])],1),t._v(" "),a("div",{staticClass:"left",staticStyle:{width:"33%"}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"操作员:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.userName)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"工厂:"}},[a("span",[t._v(t._s(t.dealData(t.missionInfo.factoryName)))])]),t._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"生产状态:"}},[a("span",[t._v(t._s(0==t.missionInfo.status?"新建":1==t.missionInfo.status?"进行中":"结束"))])])],1)])],1)])],1),t._v(" "),a("div",{staticClass:"clearfloat"},[a("div",{staticClass:"clearfloat infoBox"},[a("div",{staticClass:"left",staticStyle:{width:"50%","text-align":"center"}},[a("span",[t._v("今日已完成 "),a("i",{staticClass:"textBlue"},[t._v(t._s(t.dealData(t.todayTotal)))])])]),t._v(" "),a("div",{staticClass:"left",staticStyle:{width:"50%","text-align":"center"}},[a("span",[t._v("已完成总量 "),a("i",{staticClass:"textBlue"},[t._v(t._s(t.dealData(t.missionInfo.finishedTotal)))])])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}],staticClass:"clearfloat"},[a("span",[t._v("扫描设备")]),t._v(" "),a("Divider"),t._v(" "),a("Collapse",{staticClass:"collapse",style:t.inputBG},[a("Panel",{staticClass:"clearfloat",staticStyle:{position:"relative"},attrs:{name:"now"}},[a("Form",{ref:"form",staticClass:"clearfloat",staticStyle:{display:"inline-block","margin-top":"2px",width:"95%"},attrs:{model:t.form,rules:t.rule,"label-position":"right","label-width":70,inline:""}},[a("FormItem",{staticStyle:{width:"350px"},attrs:{prop:"mac",label:"MAC地址:"}},[a("Input",{ref:"macInput",staticClass:"input macInput",staticStyle:{height:"100px"},attrs:{disabled:t.macDisable,id:"macInput"},on:{"on-enter":t.handleCheckMAC},model:{value:t.form.mac,callback:function(e){t.$set(t.form,"mac",e)},expression:"form.mac"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"snCode",label:"SN码:"}},[a("Input",{ref:"snInput",staticClass:"input snInput",attrs:{id:"snInput",disabled:t.snDisable},on:{"on-enter":t.handleCheckSn},model:{value:t.form.snCode,callback:function(e){t.$set(t.form,"snCode",e)},expression:"form.snCode"}})],1),t._v(" "),a("FormItem",{staticClass:"right",attrs:{prop:"snCode",label:"检测结果:"}},["0"==t.checkStatus?a("span",{staticStyle:{"font-size":"25px",color:"#fff"}},[t._v("未开始检测")]):t._e(),t._v(" "),"1"==t.checkStatus?a("span",{staticStyle:{"font-size":"20px",color:"#fff"}},[t._v("正在检测")]):t._e(),t._v(" "),"2"==t.checkStatus?a("span",{staticStyle:{"font-size":"20px",color:"#fff"}},[t._v("检测失败，设备未响应")]):t._e(),t._v(" "),"3"==t.checkStatus?a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v("未通过")]):t._e(),t._v(" "),"4"==t.checkStatus?a("span",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v("通过")]):t._e(),t._v(" "),"3"==t.checkStatus?a("span",{staticStyle:{"font-size":"20px",color:"#fff"}},[t._v(t._s(t.errorMSG))]):t._e()])],1),t._v(" "),a("div",{staticClass:"clearfloat",attrs:{slot:"content"},slot:"content"},[a("span",{staticClass:"title"},[t._v("固件检测")]),t._v(" "),t.firmCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.firmCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.firmCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",staticStyle:{position:"relative"},attrs:{model:t.form,"label-position":"right","label-width":100,inline:""}},[a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"MAC地址:"}},[a("span",[t._v(t._s(t.form.mac))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"SN码:"}},[a("span",[t._v(t._s(t.form.snCode))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"通信类型:"}},[a("span",[t._v(t._s(t.checkNowData.profile.type))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{prop:"sncode",label:"模块型号:"}},[a("span",[t._v(t._s(t.checkNowData.profile.moduleType))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{prop:"sncode",label:"固件版本:"}},[a("span",[t._v(t._s(t.checkNowData.profile.softVersion))])]),t._v(" "),t.checkHardLoading?a("Spin",{attrs:{fix:""}}):t._e()],1),t._v(" "),a("span",{staticClass:"title"},[t._v("秘钥检测")]),t._v(" "),t.keyCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.keyCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.keyCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",staticStyle:{position:"relative"},attrs:{model:t.form,"label-position":"right","label-width":100,inline:""}},[a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"ProductKey:"}},[a("span",[t._v(t._s(t.checkNowData.quad.productKey))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"ProductSecret:"}},[a("span",[t._v(t._s(t.checkNowData.quad.productSecret))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{prop:"deviceName",label:"DeviceName:"}},[a("span",[t._v(t._s(t.checkNowData.quad.deviceName))])]),t._v(" "),a("FormItem",{staticStyle:{},attrs:{prop:"deviceSecret",label:"DeviceSecret:"}},[a("span",[t._v(t._s(t.checkNowData.quad.deviceSecret))])]),t._v(" "),t.checkkeyLoading?a("Spin",{attrs:{fix:""}}):t._e()],1),t._v(" "),a("span",{staticClass:"title"},[t._v("设备属性")]),t._v(" "),t.attCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.attCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.attCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Table",{attrs:{border:"",stripe:"",columns:t.columns,loading:t.checkTableLoading,data:t.listData}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{position:"relative"}},[a("span",[t._v("历史记录")]),t._v(" "),a("Divider"),t._v(" "),a("Collapse",{attrs:{value:t.activeCollapse},on:{"on-change":t.handleChangePanel}},t._l(t.listHistory,function(e,s){return a("Panel",{key:e.id,staticClass:"clearfloat",staticStyle:{position:"relative"},attrs:{name:e.id}},[a("span",{},[t._v("MAC地址:"+t._s(e.mac))]),t._v(" "),a("span",{staticStyle:{position:"absolute",left:"300px"}},[t._v("SN码:"+t._s(e.snCode))]),t._v(" "),a("span",{staticStyle:{position:"absolute",left:"550px"}},[t._v("检测时间:"+t._s(e.checkTime))]),t._v(" "),"1"==e.checkStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v("通过")]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v("未通过")]),t._v(" "),a("div",{staticClass:"clearfloat",staticStyle:{position:"relative"},attrs:{slot:"content"},slot:"content"},[a("span",{staticClass:"title"},[t._v("固件检测")]),t._v(" "),t.historyInfoData.result.firmCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.historyInfoData.result.firmCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.historyInfoData.result.firmCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",attrs:{model:t.form,"label-position":"right","label-width":100,inline:""}},[a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"MAC地址:"}},[a("span",[t._v(t._s(t.historyInfoData.mac))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"SN码:"}},[a("span",[t._v(t._s(t.historyInfoData.snCode))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"通信类型:"}},[a("span",[t._v(t._s(t.historyInfoData.firmwareVersionDetail.type))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"模块型号:"}},[a("span",[t._v(t._s(t.historyInfoData.firmwareVersionDetail.moduleType))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{prop:"softVersion",label:"固件版本:"}},[a("span",[t._v(t._s(t.historyInfoData.firmwareVersionDetail.softVersion))])])],1),t._v(" "),a("span",{staticClass:"title"},[t._v("秘钥检测")]),t._v(" "),t.historyInfoData.result.keyCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.historyInfoData.result.keyCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.historyInfoData.result.keyCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",attrs:{model:t.form,"label-position":"right","label-width":100,inline:""}},[a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"ProductKey:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.productKey))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"ProductSecret:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.productSecret))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"DeviceName:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.deviceName))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"DeviceSecret:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.deviceSecret))])])],1),t._v(" "),a("span",{staticClass:"title"},[t._v("设备属性")]),t._v(" "),t.historyInfoData.result.attCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.historyInfoData.result.attCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.historyInfoData.result.attCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.listAtt}})],1)])})),t._v(" "),a("Button",{staticClass:"marginTop",attrs:{type:"text",name:"button"},on:{click:t.getHistoryListTable}},[t._v("更多记录")]),t._v(" "),t.panelLoading?a("Spin",{attrs:{fix:"",large:""}}):t._e()],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}]},[a("Button",{staticClass:"marginTop",attrs:{type:"text",name:"button"},on:{click:t.hanldeBack}},[a("Icon",{attrs:{size:25,type:"ios-arrow-back"}}),t._v("返回")],1),t._v(" "),a("Table",{attrs:{loading:t.historyTableLoading,columns:t.columnsHistory,data:t.listHistory,border:""}}),t._v(" "),a("Page",{staticClass:"right marginTop",attrs:{current:t.pageNum,total:t.total,"page-size":t.pageSize,size:"small","page-size-opts":[10,20,30,40],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.flip,"on-page-size-change":t.handleChangePageSize}})],1),t._v(" "),a("Modal",{staticStyle:{position:"relative"},attrs:{title:"详细信息",loading:t.dialogLoading,width:"80"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("div",{staticClass:"clearfloat",staticStyle:{position:"relative"}},[a("span",{staticClass:"title"},[t._v("固件检测")]),t._v(" "),t.historyInfoData.result.firmCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.historyInfoData.result.firmCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.historyInfoData.result.firmCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",attrs:{model:t.form,"label-position":"right","label-width":100,inline:""}},[a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"MAC地址:"}},[a("span",[t._v(t._s(t.historyInfoData.mac))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"SN码:"}},[a("span",[t._v(t._s(t.historyInfoData.snCode))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"通信类型:"}},[a("span",[t._v(t._s(t.historyInfoData.firmwareVersionDetail.type))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"模块型号:"}},[a("span",[t._v(t._s(t.historyInfoData.firmwareVersionDetail.moduleType))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{prop:"softVersion",label:"固件版本:"}},[a("span",[t._v(t._s(t.historyInfoData.firmwareVersionDetail.softVersion))])])],1),t._v(" "),a("span",{staticClass:"title"},[t._v("秘钥检测")]),t._v(" "),t.historyInfoData.result.keyCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.historyInfoData.result.keyCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.historyInfoData.result.keyCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Form",{staticClass:"clearfloat",attrs:{model:t.form,"label-position":"right","label-width":100,inline:""}},[a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"ProductKey:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.productKey))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"ProductSecret:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.productSecret))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"DeviceName:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.deviceName))])]),t._v(" "),a("FormItem",{staticStyle:{width:"48%"},attrs:{label:"DeviceSecret:"}},[a("span",[t._v(t._s(t.historyInfoData.secretCheckDetail.deviceSecret))])])],1),t._v(" "),a("span",{staticClass:"title"},[t._v("设备属性")]),t._v(" "),t.historyInfoData.result.attCheckStatus?a("span",{staticClass:"right marginRight",staticStyle:{color:"blue"}},[t._v(t._s(t.historyInfoData.result.attCheckTxt))]):a("span",{staticClass:"right marginRight",staticStyle:{color:"red"}},[t._v(t._s(t.historyInfoData.result.attCheckTxt))]),t._v(" "),a("Divider"),t._v(" "),a("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.listAtt}})],1)])],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]},c=r;var l=!1;var h=a("C7Lr")(o,c,!1,function(t){l||a("+9rc")},"data-v-33d3554d",null);h.options.__file="src/views/chance/chanceStart.vue";e.default=h.exports}});