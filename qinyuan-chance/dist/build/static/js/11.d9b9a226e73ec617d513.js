webpackJsonp([11],{rLuN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"productList",data:function(){var t=this;return{permisson:{disable:!1,info:!1},filter:{productName:"",netType:"",time:"",endTime:"",startTime:""},columns:[{title:"产品名称",key:"name",align:"center",render:function(e,i){return e("div",[e("span",t.dealNull(i.row.name))])}},{title:"ProductKey",key:"productKey",align:"center",render:function(e,i){return e("div",[e("span",t.dealNull(i.row.productKey))])}},{title:"通信类型",key:"netType",align:"center",render:function(e,i){return e("div",[e("span",t.dealNull(i.row.netType))])}},{title:"添加时间",key:"createTime",align:"center",render:function(e,i){return e("div",[e("span",t.dealNull(i.row.createTime))])}},{title:"状态",key:"qcForbidden",align:"center",render:function(t,e){return t("div",[t("span",{style:{color:1==e.row.qcForbidden?"green":"red"}},1==e.row.qcForbidden?"启用":"禁用")])}},{title:"操作",key:"action",width:150,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:1==i.row.qcForbidden?"error":"success",size:"small"},style:{marginRight:"5px",display:t.permisson.disable},on:{click:function(){t.handleDisable(i.row)}}},1==i.row.qcForbidden?"禁用":"启用"),e("Button",{props:{type:"primary",size:"small",disabled:1==i.row.qcForbidden},style:{display:t.permisson.info},on:{click:function(){t.goInfo(i.row)}}},"详情")])}}]}},mounted:function(){this.getTableData(),this.handleDealPermisson()},methods:{handleRefresh:function(){var t=this;this.$refs.filter.resetFields();var e=this.$api.manage_product_refreshProduct;this.$Ax.get(e).then(function(e){t.getTableData()}).catch(function(t){console.log(t)})},getTableData:function(){this.filter.startTime=""!=this.filter.time[0]?this.$Utils.formatDate.format(this.filter.time[0],"yyyy-MM-dd hh:mm:ss"):"",this.filter.endTime=""!=this.filter.time[1]?this.$Utils.formatDate.format(this.filter.time[1],"yyyy-MM-dd hh:mm:ss"):"";var t=this.$api.manage_product_list,e={productName:this.filter.productName,netType:this.filter.netType,endTime:this.filter.endTime,startTime:this.filter.startTime};this.$refs.HDTable.getListData(t,e)},handleDisable:function(t){var e=this,i=this.$api.manage_product_qcForbidden,r="",n="";1==t.qcForbidden?(r={productKey:t.productKey,qcForbidden:0},n="禁用"):(r={productKey:t.productKey,qcForbidden:1},n="启用"),this.$Modal.confirm({title:"提示",content:"<p>确认"+n+"该产品（产品："+t.name+"）？</p>",onOk:function(){e.$Ax.post(i,r).then(function(t){t.data.success&&e.$Message.success(n+"成功。"),e.getTableData()}).catch(function(t){console.log(t)})},onCancel:function(){e.$Message.success("已取消禁用。")}})},goInfo:function(t){this.$router.push({path:"/product/productInfo",query:{productKey:t.productKey}})},dealNull:function(t){return null==t||void 0==t||""==t?"--":t},handleDealPermisson:function(){var t=JSON.parse(sessionStorage.getItem("menu"));for(var e in t)if("产品管理"==t[e].name){var i=t[e].children[0].children;for(var r in i)"产品启用禁用"==i[r].name&&(this.permisson.disable=i[r].checked),"产品详情"==i[r].name&&(this.permisson.info=i[r].checked)}}}},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"productList"}},[i("div",{staticClass:"actBox clearfloat"},[i("Button",{staticClass:"left",attrs:{type:"primary"},on:{click:t.getTableData}},[t._v("查询")]),t._v(" "),i("Button",{staticClass:"right",attrs:{type:"primary"},on:{click:t.handleRefresh}},[t._v("刷新")])],1),t._v(" "),i("div",{staticClass:"filterbox"},[i("Form",{ref:"filter",staticClass:"clearfloat",attrs:{model:t.filter,"label-width":0}},[i("FormItem",{staticClass:"input left marginRight",attrs:{prop:"productName"}},[i("Input",{staticClass:"input",attrs:{placeholder:"产品名称",clearable:""},model:{value:t.filter.productName,callback:function(e){t.$set(t.filter,"productName",e)},expression:"filter.productName"}})],1),t._v(" "),i("FormItem",{staticClass:"input left marginRight",attrs:{prop:"netType"}},[i("Select",{staticClass:"input marginRight",attrs:{placeholder:"通信类型",clearable:""},model:{value:t.filter.netType,callback:function(e){t.$set(t.filter,"netType",e)},expression:"filter.netType"}},[i("Option",{attrs:{value:"NET_WIFI"}},[t._v("NET_WIFI")]),t._v(" "),i("Option",{attrs:{value:"NET_GPRS"}},[t._v("NET_GPRS")])],1)],1),t._v(" "),i("FormItem",{staticClass:"input left marginRight",attrs:{prop:"time"}},[i("DatePicker",{staticClass:"input",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"时间",clearable:""},model:{value:t.filter.time,callback:function(e){t.$set(t.filter,"time",e)},expression:"filter.time"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"table clearfloat marginTop"},[i("HDTable",{ref:"HDTable",attrs:{columns:t.columns}})],1)])};n._withStripped=!0;var a={render:n,staticRenderFns:[]},s=a;var o=!1;var l=i("C7Lr")(r,s,!1,function(t){o||i("veJb")},"data-v-7cffdf3a",null);l.options.__file="src/views/product/productList.vue";e.default=l.exports},veJb:function(t,e,i){var r=i("vnAQ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i("FIqI")("0c75218f",r,!1,{})},vnAQ:function(t,e,i){(t.exports=i("UTlt")(!0)).push([t.i,"\n.actBox[data-v-7cffdf3a] {\n\tmargin-bottom: 20px;\n}\n","",{version:3,sources:["/Users/nelson/workspace/qinyuan-chance-farm-web/static-files/src/views/product/productList.vue"],names:[],mappings:";AACA;CACC,oBAAoB;CACpB",file:"productList.vue",sourcesContent:["\n.actBox[data-v-7cffdf3a] {\n\tmargin-bottom: 20px;\n}\n"],sourceRoot:""}])}});