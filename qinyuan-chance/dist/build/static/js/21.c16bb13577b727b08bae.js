webpackJsonp([21],{LCXQ:function(e,t,i){(e.exports=i("UTlt")(!0)).push([e.i,"\n.ivu-form-item[data-v-1b2e1a66] {\n\tmargin-bottom: 0px;\n}\n","",{version:3,sources:["/Users/nelson/workspace/qinyuan-chance-farm-web/static-files/src/views/device/completeList.vue"],names:[],mappings:";AACA;CACC,mBAAmB;CACnB",file:"completeList.vue",sourcesContent:["\n.ivu-form-item[data-v-1b2e1a66] {\n\tmargin-bottom: 0px;\n}\n"],sourceRoot:""}])},lcUE:function(e,t,i){var n=i("LCXQ");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("FIqI")("271539e4",n,!1,{})},vpQq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"completeList",data:function(){var e=this;return{permisson:{info:!1},sweepModel:!1,filter:{time:"",startTime:"",endTime:"",identety:"",sncode:"",ip:"",productKey:"",deviceName:"",deviceSecret:"",person:""},productList:[],columns:[{title:"MAC地址",key:"identityId",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.identityId))])}},{title:"SN码",key:"sncode",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.sncode))])}},{title:"产品名称",key:"name",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.name))])}},{title:"工单",key:"userName",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.workOrderCode))])}},{title:"工厂",key:"userName",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.factoryName))])}},{title:"产线",key:"userName",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.productLineName))])}},{title:"产测时间",key:"userName",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.updateTime))])}},{title:"产测人员",key:"userName",align:"center",render:function(t,i){return t("div",[t("span",e.dealNull(i.row.userName))])}},{title:"操作",key:"action",width:150,align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.goInfo(i.row)}}},"详情"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.handleUnbind(i.row)}}},"解绑SN码")])}}]}},mounted:function(){this.getTableData(),this.getProductList(),this.handleDealPermission()},methods:{getTableData:function(){this.filter.startTime=""!=this.filter.time[0]?this.$Utils.formatDate.format(this.filter.time[0],"yyyy-MM-dd hh:mm:ss"):"",this.filter.endTime=""!=this.filter.time[1]?this.$Utils.formatDate.format(this.filter.time[1],"yyyy-MM-dd hh:mm:ss"):"",this.tableLoading=!0;var e={startTime:this.filter.startTime,endTime:this.filter.endTime,identety:this.filter.identety,sncode:this.filter.sncode,ip:this.filter.ip,productKey:this.filter.productKey,deviceName:this.filter.deviceName,deviceSecret:this.filter.deviceSecret,person:this.filter.person,status:3},t=this.$api.manage_device_finishDeviceList;this.$refs.HDTable.getListData(t,e)},getProductList:function(){var e=this,t=this.$api.manage_product_list;this.$Ax.get(t,{params:{pageNum:1,pageSize:1e3}}).then(function(t){e.productList=t.data.data}).catch(function(e){console.log(e)})},handleSwichModel:function(){this.sweepModel=!this.sweepModel,this.$refs.filter.resetFields(),this.sweepModel&&document.getElementById("mac").children[1].focus()},handleSwichSNcode:function(){document.getElementById("snCode").children[1].focus()},goInfo:function(e){this.$router.push({path:"/device/deviceInfo",name:"deviceInfo",query:{deviceId:e.deviceId}})},dealNull:function(e){return null===e||void 0===e?"--":e},handleDealPermission:function(){var e=JSON.parse(sessionStorage.getItem("menu"));for(var t in e)for(var i in e[t].children)if("完成设备"==e[t].children[i].name)for(var n in e[t].children[i].children)"设备详情"==e[t].children[i].children[n].name&&(this.permisson.info=e[t].children[i].children[n].checked)},handleUnbind:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"<p>确认解绑该设备（设备："+e.identityId+"）SN码？</p>",onOk:function(){var i=t.$api.manage_device_removeDeviceSnCodeBind,n={deviceId:e.deviceId};t.$Ax.post(i,n).then(function(e){e.data.success&&(t.$Message.success(e.data.data),t.getTableData())}).catch(function(e){console.log(e)})},onCancel:function(){t.$Message.success("已取消解绑。")}})}}},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"completeList"}},[i("div",{staticClass:"clearfloat"},[i("Button",{staticClass:"left",attrs:{type:"primary"},on:{click:e.getTableData}},[e._v("查询")]),e._v(" "),i("Button",{staticClass:"right",attrs:{type:"primary"},on:{click:e.handleSwichModel}},[e._v(e._s(e.sweepModel?"平常模式":"质检模式"))])],1),e._v(" "),i("Form",{ref:"filter",staticClass:"clearfloat",attrs:{model:e.filter,"label-width":0}},[i("FormItem",{staticClass:"input left marginRight",attrs:{prop:"identety"}},[i("Input",{staticClass:"input marginRight marginTop",attrs:{id:"mac",placeholder:"MAC地址"},on:{"on-enter":e.handleSwichSNcode},model:{value:e.filter.identety,callback:function(t){e.$set(e.filter,"identety",t)},expression:"filter.identety"}})],1),e._v(" "),i("FormItem",{staticClass:"input left marginRight",attrs:{prop:"sncode"}},[i("Input",{staticClass:"input marginRight marginTop",attrs:{id:"snCode",placeholder:"SN码"},on:{"on-enter":e.getTableData},model:{value:e.filter.sncode,callback:function(t){e.$set(e.filter,"sncode",t)},expression:"filter.sncode"}})],1),e._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.sweepModel,expression:"!sweepModel"}],staticClass:"input left marginRight",attrs:{prop:"value"}},[i("DatePicker",{staticClass:"input marginRight marginTop",attrs:{type:"datetimerange",placeholder:"日期",clearable:""},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}})],1),e._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.sweepModel,expression:"!sweepModel"}],staticClass:"input left marginRight",attrs:{prop:"productKey"}},[i("Select",{staticClass:"input marginRight marginTop",attrs:{placeholder:"产品名称",clearable:""},model:{value:e.filter.productKey,callback:function(t){e.$set(e.filter,"productKey",t)},expression:"filter.productKey"}},e._l(e.productList,function(t,n){return i("Option",{key:t.productKey,attrs:{value:t.productKey}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.sweepModel,expression:"!sweepModel"}],staticClass:"input left marginRight",attrs:{prop:"deviceName"}},[i("Input",{staticClass:"input marginRight marginTop",attrs:{placeholder:"DeviceName"},model:{value:e.filter.deviceName,callback:function(t){e.$set(e.filter,"deviceName",t)},expression:"filter.deviceName"}})],1),e._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.sweepModel,expression:"!sweepModel"}],staticClass:"input left marginRight",attrs:{prop:"deviceSecret"}},[i("Input",{staticClass:"input marginRight marginTop",attrs:{placeholder:"deviceSecret"},model:{value:e.filter.deviceSecret,callback:function(t){e.$set(e.filter,"deviceSecret",t)},expression:"filter.deviceSecret"}})],1),e._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.sweepModel,expression:"!sweepModel"}],staticClass:"input left marginRight",attrs:{prop:"person"}},[i("Input",{staticClass:"input marginRight marginTop",attrs:{placeholder:"产测人员"},model:{value:e.filter.person,callback:function(t){e.$set(e.filter,"person",t)},expression:"filter.person"}})],1)],1),e._v(" "),i("div",{staticClass:"table clearfloat marginTop"},[i("HDTable",{ref:"HDTable",attrs:{columns:e.columns}})],1)],1)};r._withStripped=!0;var a={render:r,staticRenderFns:[]},s=a;var l=!1;var o=i("C7Lr")(n,s,!1,function(e){l||i("lcUE")},"data-v-1b2e1a66",null);o.options.__file="src/views/device/completeList.vue";t.default=o.exports}});