<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
    <title>莱克</title>
</head>
<style>
	body{
		margin: 0;
		padding: 0;
	}
	.mark{
		position: absolute;
		right: 20px;
		top: 0;
		width: 38px;
		height: 50px;
		background-size: cover;
		background-repeat: no-repeat;
		background-image: url(down1.png);
	}
	.app-name {
		width: 80%;
		margin: 22px auto 5px;
		text-align: center;
		font-size: 20px;
		line-height: 1.5;
	}
	.openapp-btn {
		width: 80%;
		margin: 10px auto 5px;
		text-align: center;
		font-size: 20px;
		line-height: 1.5;
		display: block;
		margin: 30px auto 0;
		padding: 15px 0;
		font-size: 14px;
		line-height: 1;
		width: 13em;
		background: #ff5800;
		border-radius: 24px;
		text-decoration: none;
		color: #fff;
}
#tishi{
    position: relative;
    padding: 0 3em;
    box-size: content-box;
    overflow: hidden;
    background: #333;
    line-height: 50px;
    text-break: break-all;
    font-size: 16px;
    color: #fff;
    z-index: 2;
    transition: height 1s;
	
}
</style>
<body>
	<div id="tishi" class="tishi" style="height: 0;">点击右上角菜单，在浏览器中打开页面下载</div>
	<div style="position: relative;
    width: 100%;
    height: 100%;
    text-align: center;">
		<div class="mark"></div>
		<img style="
		display: block;
		padding-top: 25vh;
		width: 30%;
		/* height: 12.8rem; */
		border-radius: .8rem;
		overflow: hidden;
		margin: auto;" src="./down2.png"/>
		<div class="app-name">掌上智生活</div>
		
		<a onclick="go()" class="openapp-btn">下载安装</a>
	</div>
</body>

	
    <script type="text/javascript">
            var domain = 'https://' + window.location.host;
			var xmlhttp,html;
			if (window.XMLHttpRequest)
			{
				//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
				xmlhttp=new XMLHttpRequest();
			}
			else
			{
				// IE6, IE5 浏览器执行代码
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange=function()
			{
				if (xmlhttp.readyState==4 && xmlhttp.status==200)
				{
					var data = JSON.parse(xmlhttp.response);
					console.log(data.url)
					
				}
			}
			xmlhttp.open("GET",domain+"/lexy/api/web/version/latestAppVersionUrl" ,true);
			xmlhttp.send();
	
        /*  
         * 智能机浏览器版本信息:    
         */
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息  
                    trident: u.indexOf('Trident') > -1, //IE内核  
                    presto: u.indexOf('Presto') > -1, //opera内核  
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核  
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核  
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端  
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端  
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器  
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器  
                    iPad: u.indexOf('iPad') > -1, //是否iPad  
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部  
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
		function go(){
			var ua = navigator.userAgent.toLowerCase();//获取判断用的对象
			if (ua.match(/MicroMessenger/i) == "micromessenger") {
		document.getElementById('tishi').style.height = '50px';
			}else{
				if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
					window.location = domain+"/lexy/api/web/version/iosAppStore";  //改地址放入IOS跳转链接
				} else if (browser.versions.android) {　　　　　　　　　　　 
				//该地址放入Android下载包链接
					var xmlhttp,html;
					if (window.XMLHttpRequest)
					{
						//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
						xmlhttp=new XMLHttpRequest();
					}
					else
					{
						// IE6, IE5 浏览器执行代码
						xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
					}
					xmlhttp.onreadystatechange=function()
					{
						if (xmlhttp.readyState==4 && xmlhttp.status==200)
						{
							var data = JSON.parse(xmlhttp.response);
							html = data.url;
										window.location = html;
						}
					}
					xmlhttp.open("GET",domain+"/lexy/api/web/version/latestAppVersionUrl" ,true);
					xmlhttp.send();
				}
			}
		}
        

                //    document.writeln("语言版本: " + browser.language +"<br/>");  
             //       document.writeln(" 是否为移动终端: " + browser.versions.mobile+"<br/>");  
             //      document.writeln(" ios终端: " + browser.versions.ios+"<br/>");  
             //      document.writeln(" android终端: " + browser.versions.android+"<br/>");  
            //       document.writeln(" 是否为iPhone: " + browser.versions.iPhone+"<br/>");  
            //        document.writeln(" 是否iPad: " + browser.versions.iPad+"<br/>");  
              //      document.writeln(navigator.userAgent);
    </script>
</html>